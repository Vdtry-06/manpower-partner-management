<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tìm kiếm Đối tác</title>
    <link rel="stylesheet" th:href="@{/partner-manager/search-partner.css}">
</head>

<body>

<nav class="navbar">
    <div class="navbar-brand">
        Partner Management
    </div>
    <div class="navbar-user">
        <div class="user-info">
            <div class="user-name" th:text="${username}"></div>
            <div class="user-role">Partner Manager</div>
        </div>
        <a th:href="@{/auth/logout}" class="btn-logout">
            Logout
        </a>
    </div>
</nav>
<div class="container">

    <div class="page-header">
        <h1>Tìm kiếm đối tác để ký hợp đồng</h1>
        <p>Nhập tên đối tác hoặc một phần tên để tìm kiếm</p>
    </div>

    <div class="search-card">

        <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

        <div class="info-box">
            Nhập tên hoặc một phần tên đối tác vào ô tìm kiếm và nhấn "Tìm kiếm"
        </div>

        <form th:action="@{/partner-manager/search-partner}"
              method="get"
              class="search-form">

            <input type="text"
                   name="namePartner"
                   class="search-input"
                   placeholder="Ví dụ: Cty X, Công ty ABC..."
                   th:value="${namePartner}"
                   required autofocus>

            <button type="submit" class="btn btn-primary">
                Tìm kiếm
            </button>
        </form>

        <div class="action-buttons">
            <a th:href="@{/partner-manager/partner/add}" class="btn btn-success">Thêm đối tác mới</a>
            <a th:href="@{/partner-manager/home}" class="btn btn-secondary">Quay lại</a>
        </div>
    </div>

    <div th:if="${namePartner}" class="results-card">

        <h2 style="margin-bottom: 10px; color: #333;">
            Kết quả tìm kiếm: "<span th:text="${namePartner}"></span>"
        </h2>

        <div th:if="${#lists.isEmpty(partners)}" class="no-data">
            <p>Không tìm thấy đối tác nào với từ khóa "<span th:text="${namePartner}"></span>"</p>
            <p style="margin-top: 10px;">Vui lòng thử từ khóa khác hoặc thêm đối tác mới</p>
        </div>

        <table th:if="${not #lists.isEmpty(partners)}" class="partner-table">
            <thead>
            <tr>
                <th>STT</th>
                <th>Mã đối tác</th>
                <th>Tên đối tác</th>
                <th>Người đại diện</th>
                <th>SĐT</th>
                <th>Email</th>
                <th>Thao tác</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="partner, status : ${partners}">
                <td th:text="${status.index + 1}"></td>
                <td th:text="'DT' + ${partner.id}"></td>
                <td><strong th:text="${partner.namePartner}"></strong></td>
                <td th:text="${partner.partnerRepresentative}"></td>
                <td th:text="${partner.phoneNumber}"></td>
                <td th:text="${partner.email}"></td>

                <td>
                    <a th:href="@{'/partner-manager/select-partner/' + ${partner.id}}"
                       class="btn btn-primary"
                       style="padding: 8px 16px; font-size: 13px;">
                        Chọn
                    </a>
                </td>
            </tr>
            </tbody>
        </table>

    </div>

</div>
</body>
</html>
